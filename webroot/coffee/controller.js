// Generated by CoffeeScript 1.12.7
(function() {
  this.TemplateController = (function() {
    function TemplateController() {}

    TemplateController.prototype.statics = function() {};

    $.get('http://localhost:8080/statics', function(data) {
      var assault, context, extortion, html, physicalViolence, robberyWithViolence, theftOfAutoParts, vehicleTheft, violation, weaponInjury;
      assault = data.registers.filter(function(e) {
        return e.type === 'assault';
      });
      violation = data.registers.filter(function(e) {
        return e.type === 'violation';
      });
      physicalViolence = data.registers.filter(function(e) {
        return e.type === 'physicalViolence';
      });
      theftOfAutoParts = data.registers.filter(function(e) {
        return e.type === 'theftOfAutoParts';
      });
      extortion = data.registers.filter(function(e) {
        return e.type === 'extortion';
      });
      weaponInjury = data.registers.filter(function(e) {
        return e.type === 'weaponInjury';
      });
      robberyWithViolence = data.registers.filter(function(e) {
        return e.type === 'robberyWithViolence';
      });
      vehicleTheft = data.registers.filter(function(e) {
        return e.type === 'vehicleTheft';
      });
      context = {
        registers: data.registers.reverse(),
        counter: data.registers.length,
        message: data.message,
        assault: assault,
        violation: violation,
        physicalViolence: physicalViolence,
        theftOfAutoParts: theftOfAutoParts,
        extortion: extortion,
        weaponInjury: weaponInjury,
        robberyWithViolence: robberyWithViolence,
        vehicleTheft: vehicleTheft
      };
      html = ViewResolver.mergeViewWithModel("#statics", context);
      $("#handlebars").html(html);
      return new Chartist.Line('.chart', {
        labels: ["Asaltos", "Violaciones", "Violencia Física", "Robo de autopartes", "Extorsiones", "Lesión con arma blanca", "Robo con violencia", "Robo a vehículo"],
        series: [[assault.length, violation.length, physicalViolence.length, theftOfAutoParts.length, extortion.length, weaponInjury.length, robberyWithViolence.length, vehicleTheft.length]]
      }, {
        low: 0,
        showArea: true
      });
    });

    TemplateController.prototype.assaults = function() {
      return ApiController.showAssaults();
    };

    TemplateController.prototype.register = function() {
      var html;
      html = ViewResolver.mergeViewWithModel("#register");
      $("#handlebars").html(html);
      return Validator.validateNewForm();
    };

    return TemplateController;

  })();

  this.ApiController = (function() {
    function ApiController() {}

    ApiController.add = function() {
      return $.ajax({
        url: 'http://localhost:8080/newRegister',
        type: 'post',
        data: $('#registerForm').serialize(),
        success: function() {}
      }, console.log("Registro agregado"), {
        error: function() {
          return console.log("Error al agregar");
        }
      });
    };

    return ApiController;

  })();

}).call(this);
